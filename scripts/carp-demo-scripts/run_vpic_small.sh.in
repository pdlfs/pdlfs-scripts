#!/usr/bin/env bash

# simple VPIC demonstration script
# assumes mpich flavor of MPI is available, and single node can run 32 threads

VPIC_BIN=@CMAKE_INSTALL_PREFIX@/decks/reconnection.Linux
VPIC_PWD=/tmp/carp-demo/vpic-trace-small

mkdir -p $VPIC_PWD
cd $VPIC_PWD

# run VPIC, small scale. should be doable on a smaller cluster
mpirun -np 32 $VPIC_BIN

# enable to generate $VPIC_PWD/particle.compressed, from $VPIC_PWD/particle.compressed
# python /root/carp-install/scripts/workload_parser.py $VPIC_PWD/particle
